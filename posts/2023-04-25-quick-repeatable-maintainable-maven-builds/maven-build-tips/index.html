<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Quick, Repeatable, Maintainable Maven Builds | tomregan.github.io</title>
<meta name=keywords content><meta name=description content="There are few things more frustrating than running into issues with your build tool. One moment your build runs smoothly, and the next it fails inexplicably. Or maybe you&rsquo;ve been typing mvn clean package for years without really knowing why. In this post, I&rsquo;ll share some best practices for using Maven more effectively, and attempt to demystify some of its features.
Understand the Clean Plugin Running the Clean plugin during every build will spend unnecessary time on recompilation and packaging."><meta name=author content><link rel=canonical href=https://tomregan.github.io/posts/2023-04-25-quick-repeatable-maintainable-maven-builds/maven-build-tips/><link crossorigin=anonymous href=/assets/css/stylesheet.2d57c2ec5c1393c947086a457dd198f941b9476b45ce2a2405529f16729999ae.css integrity="sha256-LVfC7FwTk8lHCGpFfdGY+UG5R2tFziokBVKfFnKZma4=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://tomregan.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://tomregan.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://tomregan.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://tomregan.github.io/apple-touch-icon.png><link rel=mask-icon href=https://tomregan.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://tomregan.github.io/posts/2023-04-25-quick-repeatable-maintainable-maven-builds/maven-build-tips/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Quick, Repeatable, Maintainable Maven Builds"><meta property="og:description" content="There are few things more frustrating than running into issues with your build tool. One moment your build runs smoothly, and the next it fails inexplicably. Or maybe you&rsquo;ve been typing mvn clean package for years without really knowing why. In this post, I&rsquo;ll share some best practices for using Maven more effectively, and attempt to demystify some of its features.
Understand the Clean Plugin Running the Clean plugin during every build will spend unnecessary time on recompilation and packaging."><meta property="og:type" content="article"><meta property="og:url" content="https://tomregan.github.io/posts/2023-04-25-quick-repeatable-maintainable-maven-builds/maven-build-tips/"><meta property="og:image" content="https://hips.hearstapps.com/hmg-prod/images/construction-toys-1672760698.jpg"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-04-25T00:00:00+00:00"><meta property="article:modified_time" content="2023-04-25T00:00:00+00:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://hips.hearstapps.com/hmg-prod/images/construction-toys-1672760698.jpg"><meta name=twitter:title content="Quick, Repeatable, Maintainable Maven Builds"><meta name=twitter:description content="There are few things more frustrating than running into issues with your build tool. One moment your build runs smoothly, and the next it fails inexplicably. Or maybe you&rsquo;ve been typing mvn clean package for years without really knowing why. In this post, I&rsquo;ll share some best practices for using Maven more effectively, and attempt to demystify some of its features.
Understand the Clean Plugin Running the Clean plugin during every build will spend unnecessary time on recompilation and packaging."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://tomregan.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Quick, Repeatable, Maintainable Maven Builds","item":"https://tomregan.github.io/posts/2023-04-25-quick-repeatable-maintainable-maven-builds/maven-build-tips/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Quick, Repeatable, Maintainable Maven Builds","name":"Quick, Repeatable, Maintainable Maven Builds","description":"There are few things more frustrating than running into issues with your build tool. One moment your build runs smoothly, and the next it fails inexplicably. Or maybe you\u0026rsquo;ve been typing mvn clean package for years without really knowing why. In this post, I\u0026rsquo;ll share some best practices for using Maven more effectively, and attempt to demystify some of its features.\nUnderstand the Clean Plugin Running the Clean plugin during every build will spend unnecessary time on recompilation and packaging.","keywords":[],"articleBody":"There are few things more frustrating than running into issues with your build tool. One moment your build runs smoothly, and the next it fails inexplicably. Or maybe you’ve been typing mvn clean package for years without really knowing why. In this post, I’ll share some best practices for using Maven more effectively, and attempt to demystify some of its features.\nUnderstand the Clean Plugin Running the Clean plugin during every build will spend unnecessary time on recompilation and packaging. The Clean plugin is used to delete the output of a previous build. Using it only when you need it could save you a little time every day; so when do you need it? Maven recompiles source files, but it won’t clean up the class files of deleted and renamed source files for you. If you delete or rename a source or a resource file, it’s a good idea to run a clean build to avoid compilation errors, and to prevent old files from being bundled into packages. If you run mvn clean every build, you delete everything, including class files with unchanged source files, which means a longer rebuild.\nRun Verify After Pulling Code or Changing Branches Before you start working on new code, make sure you can build it. Usemvn verify to ensure that everything is in working order. Verify runs the entire build including integration tests, which is why the documentation describes it as the best default way to run a build. Be sure to run clean after you pull or switch branches to get rid of any old class files you have that may not belong in the new source tree.\nReview Build Warnings Check and fix any build warnings that pop up, including seemingly small things such as encoding problems or undefined versions. These issues can easily sneak into a project, and fixing them can prevent problems from piling up and help avoid unpleasant surprises down the road. It’s difficult to see all the warnings in a stream of output, so here’s a tip: set the log level to WARN and run the build.\nmvn -Dorg.slf4j.simpleLogger.defaultLogLevel=warn compile Don’t Depend on Transitive Dependencies Explicitly declare any dependencies that your code uses, rather than relying on transitive dependencies. Transitive dependencies (the dependencies of your dependencies) are usually available on your project’s classpath, making it tempting to reach-in and use them. Don’t, as this hurts build repeatability. When several versions of the same dependency exist, it’s likely you won’t be aware of where your dependency is coming from, and it’s almost certain the version will change upstream without your knowledge, possibly stoping your code from compiling. Avoid this by explicitly declaring all required dependencies in your project’s POM. You can go further, and ban transitive dependencies with the Maven Enforcer Plugin.\nCreate Custom Plugins While Maven comes with a large set of default plugins, sometimes you need more. Instead of scripting, take some time to learn to build custom plugins. By creating plugins you’ll have more control over your build process, and you can make them into reusable components. Maven plugins can exist in a multi-modular project, or they can be published to a repository.\nFinally, Embrace Maven Conventions Maven has a set of conventions and best practices that are widely used in projects. These conventions cover everything from project structure to naming, and they’re designed to make Maven projects more maintainable and portable. While it is sometimes tempting to deviate from these conventions, you’re better off sticking to them. When you follow the conventions, you’ll have fewer battles with the tool, and your project will be more recognisable to other Maven users. You would struggle to find better examples of Maven projects than the Maven project itself on GitHub. Using Maven effectively requires a bit more than just knowing the commands. Other build tools emphasise customisation over everything else, Maven focusses on maintainability, reliability, and reusability. Nobody wants an exciting build, and keeping builds boring makes Maven the best available tool for Java projects.\n","wordCount":"667","inLanguage":"en","image":"https://hips.hearstapps.com/hmg-prod/images/construction-toys-1672760698.jpg","datePublished":"2023-04-25T00:00:00Z","dateModified":"2023-04-25T00:00:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://tomregan.github.io/posts/2023-04-25-quick-repeatable-maintainable-maven-builds/maven-build-tips/"},"publisher":{"@type":"Organization","name":"tomregan.github.io","logo":{"@type":"ImageObject","url":"https://tomregan.github.io/favicon.ico"}}}</script></head><body id=top><script>window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://tomregan.github.io/ accesskey=h title="tomregan.github.io (Alt + H)">tomregan.github.io</a><div class=logo-switches><ul class=lang-switch><li>|</li></ul></div></div><ul id=menu><li><a href=https://tomregan.github.io/archives/ title=Archive><span>Archive</span></a></li><li><a href=https://tomregan.github.io/categories/ title=Categories><span>Categories</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://tomregan.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://tomregan.github.io/posts/>Posts</a></div><h1 class=post-title>Quick, Repeatable, Maintainable Maven Builds</h1><div class=post-meta>&lt;span title='2023-04-25 00:00:00 +0000 UTC'>April 25, 2023&lt;/span>&amp;nbsp;·&amp;nbsp;4 min&amp;nbsp;·&amp;nbsp;667 words</div></header><figure class=entry-cover><img loading=lazy src=https://hips.hearstapps.com/hmg-prod/images/construction-toys-1672760698.jpg alt="A child playing in sand with a digger"></figure><div class=post-content><p>There are few things more frustrating than running into issues with your
build tool. One moment your build runs smoothly, and the next it fails
inexplicably. Or maybe you&rsquo;ve been typing <code>mvn clean package</code> for years
without really knowing why. In this post, I&rsquo;ll share some best
practices for using Maven more effectively, and attempt to demystify
some of its features.</p><h3 id=understand-the-clean-plugin>Understand the Clean Plugin<a hidden class=anchor aria-hidden=true href=#understand-the-clean-plugin>#</a></h3><p>Running the Clean plugin during every build will spend unnecessary time
on recompilation and packaging. The Clean plugin is used to delete the
output of a previous build. Using it only when you need it could save
you a little time every day; so when do you need it? Maven recompiles
source files, but it won&rsquo;t clean up the class files of deleted and
renamed source files for you. If you delete or rename a source or a
resource file, it&rsquo;s a good idea to run a clean build to avoid
compilation errors, and to prevent old files from being bundled into
packages. If you run <code>mvn clean</code> every build, you delete everything,
including class files with unchanged source files, which means a longer
rebuild.</p><h3 id=run-verify-after-pulling-code-or-changing-branches>Run Verify After Pulling Code or Changing Branches<a hidden class=anchor aria-hidden=true href=#run-verify-after-pulling-code-or-changing-branches>#</a></h3><p>Before you start working on new code, make sure you can build it.
Use<code>mvn verify</code> to ensure that everything is in working order. Verify
runs the entire build including integration tests, which is why the
documentation describes it as <a href="https://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html#usual-command-line-calls:~:text=If%20you%20are%20uncertain%20what%20you%20want%2C%20the%20preferred%20phase%20to%20call%20is">the best default way to run a
build</a>.
Be sure to run clean after you pull or switch branches to get rid of any
old class files you have that may not belong in the new source tree.</p><h3 id=review-build-warnings>Review Build Warnings<a hidden class=anchor aria-hidden=true href=#review-build-warnings>#</a></h3><p>Check and fix any build warnings that pop up, including seemingly small
things such as encoding problems or undefined versions. These issues can
easily sneak into a project, and fixing them can prevent problems from
piling up and help avoid unpleasant surprises down the road. It&rsquo;s
difficult to see all the warnings in a stream of output, so here&rsquo;s a
tip: set the log level to WARN and run the build.</p><pre tabindex=0><code class=language-p1 data-lang=p1>mvn -Dorg.slf4j.simpleLogger.defaultLogLevel=warn compile
</code></pre><h3 id=dont-depend-on-transitive-dependencies>Don&rsquo;t Depend on Transitive Dependencies<a hidden class=anchor aria-hidden=true href=#dont-depend-on-transitive-dependencies>#</a></h3><p>Explicitly declare any dependencies that your code uses, rather than
relying on transitive dependencies. Transitive dependencies (the
dependencies of your dependencies) are usually available on your
project&rsquo;s classpath, making it tempting to reach-in and use them.
Don&rsquo;t, as this hurts build repeatability. When several versions of the
same dependency exist, it&rsquo;s likely you won&rsquo;t be aware of where your
dependency is coming from, and it&rsquo;s almost certain the version will
change upstream without your knowledge, possibly stoping your code from
compiling. Avoid this by explicitly declaring all required dependencies
in your project&rsquo;s POM. You can go further, and <a href=https://maven.apache.org/enforcer/enforcer-rules/banTransitiveDependencies.html>ban transitive
dependencies</a>
with the Maven Enforcer Plugin.</p><h3 id=create-custom-plugins>Create Custom Plugins<a hidden class=anchor aria-hidden=true href=#create-custom-plugins>#</a></h3><p>While Maven comes with a large set of default plugins, sometimes you
need more. Instead of scripting, take some time to learn to build custom
plugins. By creating plugins you&rsquo;ll have more control over your build
process, and you can make them into reusable components. Maven plugins
<a href=https://maven.apache.org/guides/mini/guide-multiple-modules.html>can exist in a multi-modular
project</a>,
or they can be published to a repository.</p><h3 id=finally-embrace-maven-conventions>Finally, Embrace Maven Conventions<a hidden class=anchor aria-hidden=true href=#finally-embrace-maven-conventions>#</a></h3><p>Maven has a set of conventions and best practices that are widely used
in projects. These conventions cover everything from project structure
to naming, and they&rsquo;re designed to make Maven projects more
maintainable and portable. While it is sometimes tempting to deviate
from these conventions, you&rsquo;re better off sticking to them. When you
follow the conventions, you&rsquo;ll have fewer battles with the tool, and
your project will be more recognisable to other Maven users. You would
struggle to find better examples of Maven projects than <a href=https://github.com/apache/maven-plugin-tools>the Maven
project itself on GitHub</a>.
Using Maven effectively requires a bit more than just knowing the
commands. Other build tools emphasise customisation over everything
else, Maven focusses on maintainability, reliability, and reusability.
Nobody wants an exciting build, and keeping builds boring makes Maven
the best available tool for Java projects.</p></div><footer class=post-footer><ul class=post-tags></ul></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://tomregan.github.io/>tomregan.github.io</a></span></footer><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>